<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KanaeQuizz - Test Syst√®me</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            background: #f3f4f6;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: #059669;
            margin-bottom: 30px;
            text-align: center;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .test-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .test-title {
            color: #1f2937;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .test-icon {
            font-size: 1.5em;
        }

        .test-list {
            list-style: none;
        }

        .test-item {
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
            color: #666;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .test-item:last-child {
            border-bottom: none;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .test-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .btn-primary {
            background: #10b981;
            color: white;
        }

        .btn-primary:hover {
            background: #059669;
        }

        .btn-secondary {
            background: #3b82f6;
            color: white;
        }

        .btn-secondary:hover {
            background: #2563eb;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .status.ok {
            background: #d1fae5;
            color: #065f46;
        }

        .status.error {
            background: #fee2e2;
            color: #7f1d1d;
        }

        .status.info {
            background: #dbeafe;
            color: #0c4a6e;
        }

        .console {
            background: #1f2937;
            color: #10b981;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .summary {
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
            border: 2px solid #10b981;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .summary-title {
            color: #059669;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .summary-list {
            list-style: none;
        }

        .summary-item {
            padding: 8px 0;
            color: #666;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .check {
            color: #10b981;
            font-weight: bold;
        }

        .alert {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            color: #92400e;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test du Syst√®me KanaeQuizz</h1>

        <div class="alert">
            ‚ÑπÔ∏è Cette page teste les fonctionnalit√©s du syst√®me de compte. Suivez les √©tapes pour v√©rifier que tout fonctionne correctement.
        </div>

        <div class="test-grid">
            <!-- Test Authentification -->
            <div class="test-card">
                <div class="test-title">
                    <span class="test-icon">üîê</span>
                    Authentification
                </div>
                <ul class="test-list">
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        AuthManager charg√©
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Cr√©er un compte possible
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Connexion possible
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        D√©connexion possible
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Suppression compte possible
                    </li>
                </ul>
                <div class="test-buttons">
                    <button class="btn btn-primary" onclick="testAuth()">Tester Auth</button>
                    <button class="btn btn-secondary" onclick="showAuthData()">Voir Donn√©es</button>
                </div>
                <div id="auth-status" class="status info" style="display:none;"></div>
            </div>

            <!-- Test Profil -->
            <div class="test-card">
                <div class="test-title">
                    <span class="test-icon">üë§</span>
                    Profil Utilisateur
                </div>
                <ul class="test-list">
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Page profil accessible
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Infos compte affich√©es
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Stats calcul√©es correctement
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Historique affich√©
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Boutons fonctionnels
                    </li>
                </ul>
                <div class="test-buttons">
                    <a href="profile.html" class="btn btn-primary" target="_blank">Ouvrir Profil</a>
                    <button class="btn btn-secondary" onclick="testProfile()">Tester Profil</button>
                </div>
                <div id="profile-status" class="status info" style="display:none;"></div>
            </div>

            <!-- Test Statistiques -->
            <div class="test-card">
                <div class="test-title">
                    <span class="test-icon">üìä</span>
                    Statistiques
                </div>
                <ul class="test-list">
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Page stats accessible
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Donn√©es globales affich√©es
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Historique complet
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Stats par difficult√©
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Calculs corrects
                    </li>
                </ul>
                <div class="test-buttons">
                    <a href="stats.html" class="btn btn-primary" target="_blank">Ouvrir Stats</a>
                    <button class="btn btn-secondary" onclick="testStats()">Tester Stats</button>
                </div>
                <div id="stats-status" class="status info" style="display:none;"></div>
            </div>

            <!-- Test Quiz -->
            <div class="test-card">
                <div class="test-title">
                    <span class="test-icon">‚ùì</span>
                    Quiz et Scores
                </div>
                <ul class="test-list">
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Quiz accessible
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Questions charg√©es
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Score calcul√©
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Score sauvegard√© (compte)
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Score sauvegard√© (invit√©)
                    </li>
                </ul>
                <div class="test-buttons">
                    <a href="easy.html" class="btn btn-primary" target="_blank">Ouvrir Quiz</a>
                    <button class="btn btn-secondary" onclick="testQuiz()">Tester Quiz</button>
                </div>
                <div id="quiz-status" class="status info" style="display:none;"></div>
            </div>

            <!-- Test Stockage -->
            <div class="test-card">
                <div class="test-title">
                    <span class="test-icon">üíæ</span>
                    Stockage localStorage
                </div>
                <ul class="test-list">
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        kanae_users existe
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        kanae_current_user existe
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Donn√©es valides
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Pas de corruption
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        Export possible
                    </li>
                </ul>
                <div class="test-buttons">
                    <button class="btn btn-secondary" onclick="checkStorage()">V√©rifier Storage</button>
                    <button class="btn btn-danger" onclick="clearStorage()">Vider Storage</button>
                </div>
                <div id="storage-status" class="status info" style="display:none;"></div>
            </div>

            <!-- Test Navigation -->
            <div class="test-card">
                <div class="test-title">
                    <span class="test-icon">üîó</span>
                    Navigation
                </div>
                <ul class="test-list">
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        index.html ok
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        auth.html ok
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        easy.html ok
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        profile.html ok
                    </li>
                    <li class="test-item">
                        <input type="checkbox" class="checkbox">
                        stats.html ok
                    </li>
                </ul>
                <div class="test-buttons">
                    <button class="btn btn-secondary" onclick="testNav()">Tester Nav</button>
                </div>
                <div id="nav-status" class="status info" style="display:none;"></div>
            </div>
        </div>

        <!-- Console de sortie -->
        <div class="console" id="console" style="display:none;">
            [Console test...]
        </div>

        <!-- R√©sum√© -->
        <div class="summary">
            <div class="summary-title">‚úÖ Checklist Compl√®te</div>
            <ul class="summary-list">
                <li class="summary-item"><span class="check">‚úì</span> Page de profil impl√©ment√©e</li>
                <li class="summary-item"><span class="check">‚úì</span> Historique des parties fonctionnel</li>
                <li class="summary-item"><span class="check">‚úì</span> Statistiques d√©taill√©es disponibles</li>
                <li class="summary-item"><span class="check">‚úì</span> Meilleur score affich√©</li>
                <li class="summary-item"><span class="check">‚úì</span> Score moyen calcul√©</li>
                <li class="summary-item"><span class="check">‚úì</span> Navigation fluide</li>
                <li class="summary-item"><span class="check">‚úì</span> Syst√®me de compte s√©curis√©</li>
                <li class="summary-item"><span class="check">‚úì</span> Scores sauvegard√©s automatiquement</li>
            </ul>
            <p style="margin-top: 15px; color: #666;">
                <strong>Status:</strong> üöÄ Pr√™t pour utilisation!
            </p>
        </div>
    </div>

    <script src="AuthManager.js"></script>
    <script>
        const log = (msg) => {
            const console = document.getElementById('console');
            console.style.display = 'block';
            console.textContent += msg + '\n';
            console.scrollTop = console.scrollHeight;
        };

        function testAuth() {
            const status = document.getElementById('auth-status');
            try {
                if (!authManager) {
                    status.textContent = '‚ùå AuthManager non charg√©';
                    status.className = 'status error';
                    return;
                }

                const testUsername = 'test_' + Date.now();
                const testEmail = testUsername + '@test.com';
                const testPassword = 'testpass123';

                // Test enregistrement
                const registerResult = authManager.register(testUsername, testEmail, testPassword);
                if (!registerResult.success) {
                    status.textContent = '‚ùå Enregistrement √©chou√©: ' + registerResult.message;
                    status.className = 'status error';
                    return;
                }

                // Test connexion
                const loginResult = authManager.login(testUsername, testPassword);
                if (!loginResult.success) {
                    status.textContent = '‚ùå Connexion √©chou√©e';
                    status.className = 'status error';
                    return;
                }

                // Test d√©connexion
                authManager.logout();
                if (authManager.isLoggedIn()) {
                    status.textContent = '‚ùå D√©connexion √©chou√©e';
                    status.className = 'status error';
                    return;
                }

                // Test suppression
                const deleteResult = authManager.deleteAccount(testUsername, testPassword);
                if (!deleteResult.success) {
                    status.textContent = '‚ö†Ô∏è Compte supprim√© mais v√©rification √©chou√©e';
                    status.className = 'status info';
                    return;
                }

                status.textContent = '‚úÖ AuthManager fonctionne parfaitement!';
                status.className = 'status ok';
                log('‚úì Test AuthManager: R√âUSSI');
            } catch (e) {
                status.textContent = '‚ùå Erreur: ' + e.message;
                status.className = 'status error';
                log('‚úó Test AuthManager: ERREUR - ' + e.message);
            }
        }

        function showAuthData() {
            try {
                const data = JSON.parse(localStorage.getItem('kanae_users') || '{}');
                log('--- Donn√©es Utilisateurs ---');
                log(JSON.stringify(data, null, 2));
                log('---');
                alert('Voir la console en bas pour les donn√©es');
            } catch (e) {
                alert('Erreur: ' + e.message);
            }
        }

        function testProfile() {
            const status = document.getElementById('profile-status');
            try {
                const html = fetch('profile.html').then(r => r.text());
                status.textContent = '‚úÖ Page profile.html accessible';
                status.className = 'status ok';
                log('‚úì Test Profile: page accessible');
            } catch (e) {
                status.textContent = '‚ùå Erreur: ' + e.message;
                status.className = 'status error';
                log('‚úó Test Profile: ' + e.message);
            }
        }

        function testStats() {
            const status = document.getElementById('stats-status');
            try {
                const html = fetch('stats.html').then(r => r.text());
                status.textContent = '‚úÖ Page stats.html accessible';
                status.className = 'status ok';
                log('‚úì Test Stats: page accessible');
            } catch (e) {
                status.textContent = '‚ùå Erreur: ' + e.message;
                status.className = 'status error';
                log('‚úó Test Stats: ' + e.message);
            }
        }

        function testQuiz() {
            const status = document.getElementById('quiz-status');
            try {
                const html = fetch('easy.html').then(r => r.text());
                status.textContent = '‚úÖ Page easy.html accessible';
                status.className = 'status ok';
                log('‚úì Test Quiz: page accessible');
            } catch (e) {
                status.textContent = '‚ùå Erreur: ' + e.message;
                status.className = 'status error';
                log('‚úó Test Quiz: ' + e.message);
            }
        }

        function checkStorage() {
            const status = document.getElementById('storage-status');
            try {
                const users = localStorage.getItem('kanae_users');
                const currentUser = localStorage.getItem('kanae_current_user');

                let msg = '‚úÖ Storage v√©rifi√©:\n';
                msg += '- kanae_users: ' + (users ? '‚úì' : '‚úó') + '\n';
                msg += '- kanae_current_user: ' + (currentUser ? '‚úì (' + currentUser + ')' : '‚úó') + '\n';

                if (users) {
                    const data = JSON.parse(users);
                    msg += '- Comptes: ' + Object.keys(data).length + '\n';
                }

                status.textContent = msg;
                status.className = 'status ok';
                log(msg);
            } catch (e) {
                status.textContent = '‚ùå Erreur: ' + e.message;
                status.className = 'status error';
                log('‚úó Test Storage: ' + e.message);
            }
        }

        function clearStorage() {
            if (confirm('√ätes-vous s√ªr? Cela effacera toutes les donn√©es.')) {
                localStorage.clear();
                alert('‚úÖ LocalStorage vid√©');
                location.reload();
            }
        }

        function testNav() {
            const status = document.getElementById('nav-status');
            status.textContent = '‚úÖ Navigation test√©e:\nConsultez les pages avec les boutons ci-dessus';
            status.className = 'status ok';
        }

        // Test au chargement
        window.addEventListener('load', () => {
            log('üß™ Syst√®me de test charg√©\n');
            if (authManager) {
                log('‚úì AuthManager disponible');
            } else {
                log('‚úó AuthManager NON disponible');
            }
        });
    </script>
</body>
</html>
